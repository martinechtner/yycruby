<%= simple_form_for sponsor do |f| %>
  <%= f.error_notification %>

  <%= f.input :company, placeholder: 'Company Name...' %>
  <%= f.input :url, placeholder: 'Company URL...' %>
  <%= f.input :description, as: :text, placeholder: 'About the company...' %>
  <%= f.input :sponsoring, as: :text, placeholder: 'What do they provide?' %>

  <div class="row">
    <div class="col-md-1">
      <%= f.label :logo %>
    </div>
    <div class="col-md-5">
      <div class="input-group">
            <span class="input-group-btn">
              <span class="btn btn-primary btn-file text-uppercase">
                Upload a logo <%= f.input_field :logo, as: :file, label: false %>
              </span>
            </span>
        <input type="text" class="form-control" placeholder="No file selected&hellip;" readonly>
      </div>
    </div>
    <div class="col-md-6">
      <% if sponsor.logo %>
        <%= image_tag sponsor.logo(:thumb), class: 'img-responsive' %>
        Current Logo
      <% end %>
    </div>
  </div>

  <%= f.button :submit, class: 'btn btn-primary text-right' %>
<% end %>

<% content_for :scripts do %>
  <script type="text/javascript" charset="utf-8">
    $(document).on('change', '.btn-file :file', function () {
      var input = $(this),
          numFiles = input.get(0).files ? input.get(0).files.length : 1,
          label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
      input.trigger('fileselect', [numFiles, label]);
    });

    $(document).ready(function () {
      $('.btn-file :file').on('fileselect', function (event, numFiles, label) {
        var input = $(this).parents('.input-group').find(':text'),
            log = numFiles > 1 ? numFiles + ' files selected' : label;

        if (input.length) {
          input.val(log);
        }
      });
    });
  </script>
<% end %>
